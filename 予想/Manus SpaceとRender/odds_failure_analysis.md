# オッズ取得失敗の原因分析

## 発生状況
- 発生件数: 22件（見送り114件中）
- 発生パターン: 特定の競艇場・レースで発生

## 失敗しているレースの例
| 時刻 | 競艇場コード | レース | 買い目 |
|------|-------------|--------|--------|
| 14:34 | 17 (宮島) | 10R | 1=3 |
| 14:39 | 02 (戸田) | 9R | 1=3 |
| 14:47 | 16 (児島) | 9R | 1=3 |
| 14:50 | 08 (常滑) | 10R | 1=3 |
| 14:58 | 17 (宮島) | 11R | 1, 1=3 |
| 15:00 | 11 (びわこ) | 10R | 1=3 |
| 15:00 | 04 (平和島) | 10R | 1=3 |
| 15:09 | 02 (戸田) | 10R | 1=3 |
| 15:14 | 16 (児島) | 10R | 1=3 |
| 15:16 | 15 (丸亀) | 1R | 1=3 |
| 15:19 | 20 (若松) | 1R | 1=3 |
| 15:21 | 19 (下関) | 1R | 1=3 |
| 15:23 | 01 (桐生) | 1R | 1=3 |
| 15:25 | 17 (宮島) | 12R | 1, 1=3 |
| 15:27 | 08 (常滑) | 11R | 1, 1=3 |
| 15:31 | 04 (平和島) | 11R | 1, 1=3 |

## 原因の可能性

### 1. オッズデータがDBに存在しない
- 高頻度オッズ収集が間に合っていない
- 購入判断時点（締切1分前）でオッズがまだ収集されていない

### 2. テーブルのカラム名・型の不一致
- `odds_quinella`テーブルの`combination`カラムの形式が異なる
- `1=3` vs `1-3` の形式の違い

### 3. stadium_codeの型の不一致
- virtual_bets: varchar (文字列)
- odds_quinella: smallint (数値)

## 調査が必要な項目
1. odds_quinellaテーブルのスキーマ確認
2. 実際に保存されているcombinationの形式確認
3. stadium_codeの型確認
