# オッズワーカー（boatrace-odds-high-freq-worker）ログ分析

## 確認日時
2026年1月20日 16:28 JST

## デプロイ状況
- 最新デプロイ: v1.4.1（Fix: 購入履歴の締切時刻を日本時間で表示）
- デプロイ完了: 2026年1月20日 3:40 AM JST
- 前回デプロイ: ecbc289（Fix: 時間帯処理をJSTに統一）3:30 AM JST

## ログ分析結果

### 1. 仮想購入処理（30秒間隔）
- 正常に動作中
- 締切時間範囲がJSTで表示されている（修正が反映）
  - 例: `締切時間範囲: 2026-01-20 16:27:35.035087 〜 2026-01-20 16:29:35.035087 (JST)`
- 「処理対象の購入予定がありません」と表示 → 購入予定がないため見送り

### 2. 結果更新処理
- 結果確認対象: 2件（24場 10R, 11R）
- 両方とも「レース結果未確定」状態
- 結果収集ジョブも動作中（場:17のR:4〜R:10のデータなし）

### 3. 高頻度オッズ収集（5秒間隔）
- WARNING: 「maximum number of running instances reached (1)」
- 前回の実行が完了する前に次の実行がスキップされている
- これは正常な動作（同時実行を防止）

## 問題点

### 購入予定がない理由
- 「処理対象の購入予定がありません」と表示
- 考えられる原因:
  1. 朝8:00の購入予定登録バッチ（boatrace-daily-register）が動作していない
  2. 購入予定が登録されていない
  3. 締切時間の範囲内に該当するレースがない

## 次のアクション
1. boatrace-daily-registerのログを確認
2. データベースのpurchase_historyテーブルを確認
3. 今日のレース開催状況を確認

## boatrace-daily-register ログ分析

### 最新実行
- 実行日時: 2026-01-19 23:00:59 (UTC) = 2026-01-20 08:00:59 (JST)
- 今日のレース数: 180件
- **購入予定登録完了: 0件** ← 問題点

### 問題の原因
購入予定が0件登録されている理由:
1. 予測モデルが購入推奨を出していない
2. 戦略条件に合致するレースがない
3. auto_betting.pyのregister処理に問題がある可能性

### 次のアクション
- auto_betting.pyのregister処理のロジックを確認
- 予測モデルの出力を確認
- 戦略条件を確認
